package model;
import model.*;
import com.fofo.apricot.*;
import model.train.*;

class DistanceController implements Controller{
	Train[] train;
	
	Dispatcher dispatch;
	
	Wait delay = new Wait([0,100]);
	
	Wait wait= new Wait([0,1]);
	
	Assignment caldistance = new Calculating(train);
	
	
	
	DistanceController(Train[] train, Dispatcher dispatch){
		this.train = train;
		this.dispatch = dispatch;
	}
	
	void Composition(){
		tau(delay, caldistance, wait) {
			Condition{
				delay.getTime()==100;
			};
			Discrete{
				caldistance.setTrains(dispatch.getRunningTrains());
				wait.reset();	
			};
		}
		tau(wait, caldistance, wait) {
			Condition{
				wait.getTime()==1;
			};
			Discrete{
				caldistance.setTrains(dispatch.getRunningTrains());
				wait.reset();
			};
		}
	}
	
	void setTrains(Train[] train){
		this.train = train;
	}
	
}